<launch>
  
  <arg name="calib" default="false" />
  <arg name="debug" default="false" />

  <node type="nodelet" pkg="nodelet" name="fisheye_manager" args="manager" output="screen"/>
  <node type="nodelet" pkg="nodelet" name="fisheye_to_panorama"
        args="load jsk_perception/FisheyeToPanorama fisheye_manager" output="screen">
    <remap from="~input" to="/camera/image_raw"/>
    <param name="k" value="275.0"/>
    <param name="odom_topic_name" value="/dji_sdk/odometry" />
    <param name="debug" value="$(arg debug)" />
    <param name="calib" value="$(arg calib)" />
  </node>

  <node type="image_view" pkg="image_view" name="fisheye_image_view">
    <remap from="image" to="/camera/image_raw"/>
  </node>

  <node type="image_view" pkg="image_view" name="undistorted_image_view">
    <remap from="image" to="/fisheye_to_panorama/output"/>
  </node>

  <group if="$(arg debug)">
    <node type="image_view" pkg="image_view" name="center_undistorted_image_view">
      <remap from="image" to="/fisheye_to_panorama/debug"/>
    </node>
  </group>


  <node type="image_view" pkg="image_view" name="undistorted2_image_view">
    <remap from="image" to="/fisheye_to_panorama/output_bilinear"/>
  </node>

</launch>
